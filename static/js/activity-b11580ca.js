import{_ as m,N as y,r as i,o as r,c as p,d as l,w as d,a as C,F as k,b as w,e as D}from "./index-7d1d6393.js";const L={name:"activity",components:{NavBar:y},data(){return{active:0,list:[],list2:[],cType:"",curPage:0,pageSize:50,hasMoreData:!1,inputVal:"",isSearch:!1,loading:!1,showImg:!1,imgUrl:""}},created(){this.onLoadData()},activated(){const e=this.$route.query.t;new Date().getTime()-e<1e3&&(window.scrollTo(0,0),Object.assign(this.$data,this.$options.data()),this.onLoadData())},methods:{onChange(e){this.curPage=0,this.cType=this.list[e].objectId,this.onLoadData()},onLoadData:function(){this.curPage+=1;let e=this;this.loading=!0;let a={content:this.inputVal,index:this.curPage,pageSize:this.pageSize,cid:"3d209e9f-09ab-4c46-8d3d-89833cf8d848"};this.$http.get("/cp/miniList",a).then(h=>{let c=h.result,t=c.records,n=c.pages>this.curPage;this.loading=!1;let o=e.list2;this.curPage===1?o=t:o=o.concat(t),e.list2=o,e.hasMoreData=n})},onConfirm(){this.curPage=0,this.isSearch=!!this.inputVal,this.onLoadData()},onClear(){this.inputVal="",this.isSearch=!1,this.curPage=0,this.onLoadData()},clickCell(e){e.type===0||e.type===3||e.type===5?window.open(e.imageUrl):e.type===2?window.location.href=e.httpUrl:this.$router.push(`/rich?id=${e.id}`)}}},V={class:"page"},P={class:"content"};function S(e, a, h, c, t, n){const o=i("nav-bar"),u=i("van-search"),_=i("van-sticky"),g=i("van-cell"),f=i("van-cell-group"),v=i("van-list");return r(),p("div",V,[l(_,null,{default:d(()=>[l(o,{title:"\u6D3B\u52A8\u9884\u544A"}),l(u,{placeholder:"\u641C\u7D22\u5173\u952E\u5B57",modelValue:t.inputVal,"onUpdate:modelValue":a[0]||(a[0]= s=>t.inputVal=s),onSearch:n.onConfirm,onCancel:n.onClear},null,8,["modelValue","onSearch","onCancel"])]),_:1}),C("div",P,[l(v,{loading:t.loading,"onUpdate:loading":a[1]||(a[1]= s=>t.loading=s),finished:!t.hasMoreData,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:n.onLoadData,offset:500,"immediate-check":!0},{default:d(()=>[l(f,null,{default:d(()=>[(r(!0),p(k,null,w(t.list2, s=>(r(),D(g,{title:s.name,onClick: x=>n.clickCell(s),"is-link":""},null,8,["title","onClick"]))),256))]),_:1})]),_:1},8,["loading","finished","onLoad"])])])}const U=m(L,[["render",S],["__scopeId","data-v-35049523"]]);export{U as default};
