import{c as U}from "./config-ebaf3ab9.js";import{k as K}from "./kx-1de81e01.js";import{_ as D,r as m,o,c as n,a as i,F as A,b as C,t as r,n as E,d as h,w as p,e as L,f as I,g as w,p as z,h as H,s as F,i as R,D as Y,N as J,j as v,v as k,k as O}from "./index-7d1d6393.js";import{z as W,a as Z}from "./panel-cdd17d44.js";/* empty css                                                              */const j=""+new URL("../png/qiu-085ddd02.png",import.meta.url).href;const Q={name:"desc",props:{pid:String|Number,pokemon:{type:Object,default:{speed:0,sa:0,specialTraining:"",pa:0,sd:0,hp:0,pd:0,pokemonName:"",skin:"",mjctz:"",property:""}}},data(){return{config:{tx:[],skill:[],superSkill:[],xg:[],efforts:[],prop:[]},skillColor:U.skill,resistanceList:K,attribute:U.attribute,resistance:[]}},created(){this.getConfig(),this.calculate()},watch:{pid(e){e&&this.getConfig()},pokemon(e, s){e&&this.calculate()}},methods:{getConfig(){!this.pid||this.$http.get("/team/config",{pid:this.pid}).then(e=>{this.config=e.result})},calculate(){let e=this.pokemon.property;if(e==="?")return;let s=e.split("");if(s.length===0)return;let a=this.attribute,y=s.map(d=>a.indexOf(d)),t=this.resistanceList,l=[];for(let d=0; d<18; d++){let f=y.filter(c=>c!==-1).map(c=>parseFloat(t[d][c])).reduce((c, u)=>c*u);l.push(f)}this.resistance=l},toConfigDetail(e, s){this.$router.push({path:"/"+e,query:{name:s}})}}},x= e=>(z("data-v-be2fc505"),e=e(),H(),e),X={class:"t3_item"},q=x(()=>i("div",{class:"t3_label"},"\u63A8\u8350\u7279\u6027",-1)),G={key:0,class:"t3__list"},$=["onClick"],tt={key:1,class:"no_data"},et={class:"t3_item"},st=x(()=>i("div",{class:"t3_label"},"\u8D85\u7EA7\u62DB\u5F0F",-1)),it={key:0,class:"t3__list"},ot=["onClick"],nt={key:1,class:"no_data"},lt=x(()=>i("div",{class:"t3_title"},"\u63A8\u8350\u914D\u62DB",-1)),ct={class:"t3_skill"},rt={key:0,class:"t3_list"},at=["onClick"],dt={key:1,class:"no_data"},mt=x(()=>i("div",{class:"t3_title"},"\u63A8\u8350\u6027\u683C",-1)),ht={class:"t3_skill"},ut={key:0,class:"t3_xg"},_t={key:1,class:"no_data"},pt=x(()=>i("div",{class:"t3_title"},"\u52AA\u529B\u503C",-1)),gt={class:"t3_skill"},ft={key:0,class:"t3_list nlz"},vt={key:1,class:"no_data"},kt=x(()=>i("div",{class:"t3_title"},"\u63A8\u8350\u9053\u5177",-1)),At={key:0,class:"t3_list_prop"},yt=["onClick"],Ct={style:{display:"flex","align-items":"center",height:"40px"}},wt=["src"],bt={style:{"min-width":"100px",padding:"0 6px",color:"black"}},Lt={style:{"font-size":"16px"}},xt={key:1,class:"no_data"},Bt={key:0},Dt=x(()=>i("div",{class:"t3_title"},"\u5C5E\u6027\u514B\u5236",-1)),It={key:0,style:{color:"#FF1111"}},St={key:1,style:{color:"#1111FF"}},Vt={key:2,style:{color:"#11BB11"}},Ut=x(()=>i("div",{class:"zy"},"\u6CE8\u610F\uFF1A\u6570\u636E\u6765\u6E90\u4E8E\u961F\u4F0D\u914D\u7F6E\u7EDF\u8BA1\uFF0C\u9002\u5408\u81EA\u5DF1\u7684\u914D\u7F6E\u624D\u662F\u6700\u597D\u7684\u914D\u7F6E\u3002",-1));function Ft(e, s, a, y, t, l){const d=m("van-grid-item"),f=m("van-grid");return o(),n("div",null,[i("div",X,[q,t.config.tx&&t.config.tx.length>0?(o(),n("div",G,[(o(!0),n(A,null,C(t.config.tx,(c, u)=>(o(),n("div",{class:"t3_li",key:u,onClick: b=>l.toConfigDetail("character",c.name)},[i("div",null,r(c.name),1),i("div",null,r(c.desc),1)],8,$))),128))])):(o(),n("div",tt,"\u6682\u65E0\u6570\u636E"))]),i("div",et,[st,t.config.superSkill.length>0?(o(),n("div",it,[(o(!0),n(A,null,C(t.config.superSkill,(c, u)=>(o(),n("div",{class:"t3_li",key:u,onClick: b=>l.toConfigDetail("superSkill",c.name)},[i("div",null,r(c.name),1),i("div",null,r(c.desc),1)],8,ot))),128))])):(o(),n("div",nt,"\u6682\u65E0\u6570\u636E"))]),lt,i("div",ct,[t.config.skill.length>0?(o(),n("div",rt,[(o(!0),n(A,null,C(t.config.skill,(c, u)=>{var b;return o(),n("div",{onClick: B=>l.toConfigDetail("skill",c.name),key:u,style:E({background:(b=t.skillColor[c.attrs])==null?void 0:b.color})},r(c.name),13,at)}),128))])):(o(),n("div",dt,"\u6682\u65E0\u6570\u636E"))]),mt,i("div",ht,[t.config.xg.length>0?(o(),n("div",ut,[(o(!0),n(A,null,C(t.config.xg,(c, u)=>(o(),n("div",{key:u},r(c.name),1))),128))])):(o(),n("div",_t,"\u6682\u65E0\u6570\u636E"))]),pt,i("div",gt,[t.config.efforts.length>0?(o(),n("div",ft,[(o(!0),n(A,null,C(t.config.efforts,(c, u)=>(o(),n("div",{key:u},r(c.name),1))),128))])):(o(),n("div",vt,"\u6682\u65E0\u6570\u636E"))]),i("div",null,[kt,t.config.prop.length>0?(o(),n("div",At,[(o(!0),n(A,null,C(t.config.prop,(c, u)=>(o(),n("div",{class:"t3_prop",key:u,onClick: b=>l.toConfigDetail("props",c.name),"data-name":"{{item.name}}","data-type":"exclusive"},[i("div",Ct,[i("img",{src:c.icon,alt:"",style:{width:"26px"}},null,8,wt),i("div",bt,r(c.name),1)]),i("div",Lt,r(c.desc),1)],8,yt))),128))])):(o(),n("div",xt,"\u6682\u65E0\u6570\u636E"))]),a.pokemon.property!=="?"&&a.pokemon.property.length!==18?(o(),n("div",Bt,[Dt,h(f,{"column-num":"3"},{default:p(()=>[(o(!0),n(A,null,C(t.resistance,(c, u)=>(o(),L(d,{key:u},{default:p(()=>[i("div",null,[i("div",null,[I(r(t.attribute[u])+"\uFF1A ",1),c>1?(o(),n("span",It,r(c),1)):c<1?(o(),n("span",St,r(c),1)):(o(),n("span",Vt,r(c),1))])])]),_:2},1024))),128))]),_:1})])):w("",!0),Ut])}const Et=D(Q,[["render",Ft],["__scopeId","data-v-be2fc505"]]);const zt={data(){return{clientWidth:0,clientHeight:0,left:0,top:0,coefficientHeight:.8}},props:{text:String,align:{type:String,default:"left"}},computed:{},created(){this.clientWidth=document.documentElement.clientWidth,this.clientHeight=document.documentElement.clientHeight,this.left=this.align==="left"?0:this.clientWidth-55,this.top=this.clientHeight*this.coefficientHeight},watch:{left(e, s){}},methods:{touchstart(){this.$refs.floatButton.style.transition="none"},touchend(){this.$refs.floatButton.style.transition="all 0.3s"},touchmove(e){if(e.targetTouches.length===1){let s=e.targetTouches[0];this.left=s.clientX-20,this.top=s.clientY-25}e.preventDefault()}},mounted(){this.$nextTick(()=>{const e=this.$refs.floatButton;e.addEventListener("touchstart",this.touchstart),e.addEventListener("touchmove",this.touchmove),e.addEventListener("touchend",this.touchend)})},beforeMount(){window.removeEventListener("touchstart",this.touchstart),window.removeEventListener("touchmove",this.touchmove),window.removeEventListener("touchend",this.touchend)}},Ht={class:"float_button"};function Pt(e, s, a, y, t, l){return o(),n("div",Ht,[i("div",{ref:"floatButton",class:"float_info",style:E({left:t.left+"px",top:t.top+"px"})},r(a.text),5)])}const Tt=D(zt,[["render",Pt],["__scopeId","data-v-3ac262f2"]]),Rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADeElEQVR4Xu2bWahNURjHf5cSL7yYMiSZJSkkIiTFmyFDKKG4mfJiepCpzCWZojx5EMqDFymhTC+IB5QoiTyQDOWBQn+tre3Y49r73LP32uer3bm3u9c66/9b37fW3t+3bgsVt5aK66cJoOkB5SKwEDgH3AEOAJezDr9sIbAF2OsTPR+4mAVC2QCcAZb7BL8HxgMvbSGUDcB9YHSN2BPAmioAWAmcChD6HBhSBQBBs+/p7gZ8sIFQlhAIm31P81TgpqsABgJ3Ac1ymHUGvroK4AYwJUKc02vAcWB1zMzqwWiRzeyrTZHXgKPA2gTCtAVqK7SyogK4AMxLqKgv8Cbhvf/dVkQAacRr5dcOYG1FAjAC2A3MSqFmI3Aoxf2F9YBWYFfMVhekU4/FD8sMoL8RvsRChN4C9TaYyRoZAiuAbUA/SwUTgHuWbf82awSA4Ua4khu2dgTYYNvY364tAbQ3r62a9a4ZB59p62trAHpOX2YSGSMzClfzfcDWHPr500U9PaCnEa0MzoC8Bpz3mJMAmAHsB6Jmbyeww4jU/bOBOTm4ehZuH4ErwB7gaVhHcQC6m1fRoBm8Dvw0Hd8GFJeLgY5ZRl2Htk8A7RhfgvqOA6CV9nDIoPxtNfvb6zD4vLqUV161AXALmOgAAH+I/iMnzgP0ltW7ygB+RfhgmUJgE3DQJgRcATAXuFRVAJ/NFv66qgBORuUV4xbBsofAI5Mx+mT7IFRmAEqWKmegAmqoue4Bx4B1VQYg7ZFlM9c9oAmg6QEVD4F3QK8qL4Kh7wAeFJcXwR/AYOBVVT1gszlLGJlUcdEDdFZIlabADFAtDRcBKD85KWkuzUUA0j4W0KmyWHMVQJewLHAVQuAZoPpjInPRA04DqxKpT1Bm+gZ0KllWeAzwIC8AjyNKYkXMCqeafUGKC4Ha4+l+sEUDoDrgeuBF0tlPAmAacC2kw8nAd6CdOcmpEriOtTbCJFznClNbnAeowyR1P5WeVIXV6utdw8zPQ1OPKl0Dxbvi3sqSAFDH44CZMd/glcdrb1NpbRSwwFwdrEYa3ih13IfFcc7jCuxukA+EzgVmNZW+dVIstP4f9wVJPSCuH5u/Twe8Sx6S1vSouzSLeH1hIwH4BfcxYaJjNbp6mE/vd32qRvHW/IPUWeB8WmJB9xcFQB5arPpoArDC5lCjynvAb1iVpEH4EeF6AAAAAElFTkSuQmCC",Nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEiklEQVR4Xu2bWahVVRjHf4JiLxomCiY4pCk4TxBFqJkPimKJGEiW5owRKjmgWBaGpiiOIETh7EM+aCqKYWY+KGVqCE5omVAUamamOD0Yf/h2rHvuns69Z9/tOet+cLicu9Zee/3/61vf+oZ1GuC5NPAcP/UE1GtA/gw0ApoDzwAtgR+BO3U1rby3wEfAOKBdAeAfgFPA18CuLMnIm4B/gKYJAI8By4A9WRCRJwEDgW8N1McOuLZAH6CH878bwBDgZKlJeJII0HZw5UXgA2Co/XMvMMInAgKsXwAT7MswYH8pSchTA3oBp50tUKgBAc5XgUP25XNgcqUQ0Br4LQUB6vLY+h0BXqkUAnT+P/SZgE7ARSNgFrA6ZmUrUgPGADsM9Ehgt28ErADeN9C9gZ98I0BOkJwhSTPgVgQBIkduseRTYH4lGEEFPn8ZkDNAzxhQEwEdf5LXSu0S5+UHvAlsM1DzgOUxBKwH3rV2RYvXy10DmgBHATlC94Dngd9jQJ0A+gHHgZdKCV5j5aEB7t5fCiyIAfUWsMXaZwBry50AV503Ae8kADpsnt+/gKLEv8uZAPn6iwzAXcsABZ5gGC7X+q8EZpcafF1tAVl8qfoUB0B74NcEQC5hXYDz5UiArL3O7a42eamworsgCozD9CUwGih5AOS+NMwItnCOndqQrgzOC84ACmll1P5MOehGYLz1dTNGaR4/C/xin1i7EUaAa6XTvCxNHwGIivejnnd9hTTviOqzBtDnSliHMAKCyKs2L9Wz9wGpsVZSalwTmQYoUlTkWBu5BiibpJR7FYkjQJOOUz1Z9MCXD0tSKJsbZ+WLARS8J+0zSrO3AkYBfe2hUFuSREBc9sXdKnk4VGnJKLQlVbaiDwRIGy4AjYGdwBtJp0Da7Eu5aIDwXgY6ADoduvlIQORi+bAFtOBXgTbmfcoL/V98IKAh8CjqJPCBADf7XC0C9YGA150SezWP1AcCVgEzbQsMBr7xzQYo8lT6TV6p0nFVvNNK14DngJ9txXUUDio2Fih3V1jhtFxhyWLgQ98I2Ay8baCVnzjoEwFPmfo/a4mRjk6Z3QtHSPH/PkO6AZgeFj5WshF0jz/5Al/5RoBqjt3tForU/4FPBOiGmTJSEl2ymhSVPanULbDQjj3hVgJEiZBQqVQClP8bACgZKvVXac0bAtzob6vjB3hDwHtOFVm1heAeUo0I+C5KdUzFgnR1VPpcNf1q3lfMmKVo0k1SXa+9aXcP9DdSsiyMBC9VTf+TUt/siECk/X7J2rYDY5MYDSPAzaMnPZ+2XZVdkRCrjmkHi+mna/VzrV3gRUKsZFnQGA6sK/gxhFJSKpcdSJpYDdpVSdbYEl2r17WaRMmSAL1c5aklTpU3mJDy9FodxepBFfePxNlW76AEh35XoNtjc5zmqcBnacbLmoBgDorLVUss/GlMmjkW26eoSnRdESAQTwMvA/1txToXiyyhv9Req55q5YOx6pKAwvnrzp+CleCj9FWxchv4HjiXcNc4ctw8CSgWbCb96wnIhNYyGrReA8posTKZ6n+KtwlQ6b1kNwAAAABJRU5ErkJggg==";const Mt={name:"item-comment",props:{item:{type:Object,default:()=>{}},index:Number},created(){this.userInfo=F.getItem("userInfo")},computed:{nickName(){return this.item.userName||this.item.nickname||"\u6E38\u5BA2"},time(){return R.commentTimeHandle(this.item.createdAt)}},methods:{onDelete(e){Y.confirm({title:"\u63D0\u793A",message:"\u662F\u5426\u5220\u9664\u8BC4\u8BBA"}).then(()=>{this.$http.delete("/comment/deleteById",{id:e}).then(s=>{this.$toast.clear(),s.code!==200?this.$toast(s.msg):(this.$toast("\u5220\u9664\u6210\u529F"),this.$emit("update",{type:"delete"}))})}).catch(()=>{})},onHit(){const e=this.item;this.$http.post("/comment/updateHit",{id:e.id,hit:e.hit2?-1:1}).then(s=>{this.$toast.clear(),s.code!==200?this.$toast(s.msg):this.$emit("update",{type:"hit",index:this.index})})}}},Kt= e=>(z("data-v-1e4fbe66"),e=e(),H(),e),Yt={class:"c_root"},Jt={class:"c_header"},Ot={key:1,class:"avatar"},Wt={class:"f1"},Zt={class:"flex"},jt=Kt(()=>i("div",{style:{margin:"0 8px"}},"|",-1)),Qt={key:0,class:"hit",src:Rt,alt:""},Xt={key:1,class:"hit",src:Nt,alt:""},qt={class:"c_content"};function Gt(e, s, a, y, t, l){const d=m("van-image"),f=m("van-rate");return o(),n("div",Yt,[i("div",Jt,[a.item.avatarUrl||a.item.headImg?(o(),L(d,{key:0,round:"",width:"40px",height:"40px",src:a.item.avatarUrl||a.item.headImg},null,8,["src"])):(o(),n("div",Ot,r(l.nickName.substr(0,1)),1)),i("div",Wt,[i("div",null,r(l.nickName),1),i("div",Zt,[h(f,{size:14,modelValue:a.item.rate,"onUpdate:modelValue":s[0]||(s[0]= c=>a.item.rate=c),color:"#FF9601",readonly:"","allow-half":""},null,8,["modelValue"]),jt,i("div",null,r(l.time),1)])]),i("div",{class:"c_hit_root",onClick:s[1]||(s[1]=(...c)=>l.onHit&&l.onHit(...c))},[a.item.hit2?(o(),n("img",Qt)):(o(),n("img",Xt)),i("div",null,r(a.item.hit),1)])]),i("div",qt,r(a.item.comment),1),e.userInfo.id===a.item.userId?(o(),n("div",{key:0,class:"c_del","data-id":"{{item._id}}",onClick:s[2]||(s[2]= c=>l.onDelete(a.item.id))}," \u5220\u9664 ")):w("",!0)])}const $t=D(Mt,[["render",Gt],["__scopeId","data-v-1e4fbe66"]]);const te={name:"comment",components:{ItemComment:$t},props:{pid:String|Number},data(){return{curPage:0,pageSize:30,hasMoreData:!1,commentList:[],rater:0,userInfo:{},showAdd:!1,form:{rater:0,content:""},sortIdx:0,sort:[{name:"\u6309\u70B9\u8D5E\u6392\u5E8F",value:"hit"},{name:"\u6309\u65F6\u95F4\u6392\u5E8F",value:"date"}]}},created(){this.userInfo=F.getItem("userInfo"),this.onLoadData()},watch:{pid(e){e&&(this.curPage=0,this.commentList=[],this.onLoadData())}},methods:{toggleSort(){this.sortIdx=this.sortIdx===0?1:0,this.curPage=0,this.onLoadData()},onLoadData:function(){if(!this.pid)return;this.curPage+=1;let e=this;this.loading=!0;let s={index:this.curPage,pageSize:this.pageSize,pId:this.pid,desc:this.sort[this.sortIdx].value};this.$toast.loading({message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0}),this.$http.get("/comment/queryList",s).then(a=>{let y=a.result,t=y.records,l=y.pages>this.curPage;this.loading=!1;let d=e.commentList;t.forEach(f=>{f.hit2=!1}),this.curPage===1?(d=t,this.avg()):d=d.concat(t),e.commentList=d,e.hasMoreData=l,this.$toast.clear()}, a=>{this.$toast.clear()})},avg(){this.$http.get("/comment/avgRater",{pId:this.pid}).then(e=>{this.rater=Number((e.result||5).toFixed(1))})},getUserInfoFun(){this.userInfo=F.getItem("userInfo"),this.userInfo.id?(this.form={rater:5,content:""},this.showAdd=!0):this.$router.push("/login")},onSubmit(e){if(!e.content){this.$toast("\u8BF7\u8F93\u5165\u8BC4\u8BBA\u5185\u5BB9");return}this.$toast.loading("\u63D0\u4EA4\u4E2D"),this.$http.post("/comment/insert",{userId:this.userInfo.id,comment:e.content,rate:e.rater,hit:0,pId:Number(this.pid),p_id:Number(this.pid)}).then(s=>{this.$toast.clear(),this.showAdd=!1,s.code!==200?this.$toast(s.msg):(this.$toast("\u8BC4\u8BBA\u6210\u529F"),this.curPage=0,this.onLoadData())}, s=>{this.$toast.clear(),this.showAdd=!1})},updateData(e){if(e.type==="delete")this.curPage=0,this.onLoadData();else{const s=this.commentList[e.index];s.hit2=!s.hit2,s.hit+=s.hit2?1:-1,this.commentList[e.index]=s}}}},ee= e=>(z("data-v-e48f67df"),e=e(),H(),e),se={class:"rater"},ie={style:{"margin-right":"10px"}},oe=I(" \u7EFC\u5408\u8BC4\u5206\uFF1A "),ne=ee(()=>i("div",{class:"divider"},null,-1)),le={key:1,class:"load"},ce={style:{margin:"16px 16px 48px 16px"}},re=I(" \u63D0\u4EA4 ");function ae(e, s, a, y, t, l){const d=m("van-rate"),f=m("item-comment"),c=m("van-field"),u=m("van-cell-group"),b=m("van-button"),B=m("van-form"),S=m("van-popup");return o(),n("div",null,[i("div",se,[i("div",ie,[oe,i("text",null,r(t.rater),1)]),h(d,{size:14,modelValue:t.rater,"onUpdate:modelValue":s[0]||(s[0]= _=>t.rater=_),color:"#FF9601",readonly:"","allow-half":""},null,8,["modelValue"])]),ne,i("div",{class:"comment",onClick:s[1]||(s[1]=(..._)=>l.getUserInfoFun&&l.getUserInfoFun(..._))},"\u6211\u8981\u8BC4\u8BBA"),i("div",{class:"sort",onClick:s[2]||(s[2]=(..._)=>l.toggleSort&&l.toggleSort(..._))},r(t.sort[t.sortIdx==0?1:0].name),1),(o(!0),n(A,null,C(t.commentList,(_, V)=>(o(),L(f,{key:_.id,item:_,index:V,onUpdate:l.updateData},null,8,["item","index","onUpdate"]))),128)),t.hasMoreData?(o(),n("div",{key:0,class:"load",onClick:s[3]||(s[3]=(..._)=>l.onLoadData&&l.onLoadData(..._))}," \u70B9\u51FB\u67E5\u770B\u66F4\u591A ")):w("",!0),t.commentList.length===0?(o(),n("div",le," \u6682\u65E0\u8BC4\u8BBA ")):w("",!0),h(S,{show:t.showAdd,"onUpdate:show":s[6]||(s[6]= _=>t.showAdd=_),closeable:"",position:"bottom"},{default:p(()=>[h(B,{onSubmit:l.onSubmit},{default:p(()=>[h(u,{title:"\u6211\u8981\u8BC4\u8BBA"},{default:p(()=>[h(c,{name:"rater",label:"\u8BC4\u5206","input-align":"right"},{input:p(()=>[h(d,{modelValue:t.form.rater,"onUpdate:modelValue":s[4]||(s[4]= _=>t.form.rater=_)},null,8,["modelValue"])]),_:1}),h(c,{modelValue:t.form.content,"onUpdate:modelValue":s[5]||(s[5]= _=>t.form.content=_),name:"content",rows:"5",type:"textarea",placeholder:"\u8BC4\u8BBA"},null,8,["modelValue"])]),_:1}),i("div",ce,[h(b,{round:"",block:"",type:"primary","native-type":"submit"},{default:p(()=>[re]),_:1})])]),_:1},8,["onSubmit"])]),_:1},8,["show"])])}const de=D(te,[["render",ae],["__scopeId","data-v-e48f67df"]]);const me=["skill","superSkill","character","props"],he={name:"detail",components:{NavBar:J,description:Et,zConfig:W,zPanel:Z,floatButton:Tt,zComment:de},data(){return{active:"panel",pokemon:{speed:0,sa:0,specialTraining:"",pa:0,sd:0,hp:0,pd:0,pokemonName:"",skin:"",mjctz:"",property:""},nlList:[0,0,0,0,0,0],imgList:[],raceList:[],objectId:"",characteristicList:[],attrs:U.attrs,showRace:!1,showTx:!1,pokemonValue:{},isFirst:!0}},created(){this.isFirst=!0},beforeRouteEnter(e, s, a){e.meta.isBack=me.includes(s.name),a()},activated(){let e=this;(!this.$route.meta.isBack||this.isFirst)&&(window.scrollTo(0,0),e.active="panel",e.getPokemon(this.$route.query)),this.isFirst=!1},computed:{raceSum(){return this.raceList.length===0?0:this.raceList.reduce((e, s)=>e+Number(s),0)}},methods:{getPokemon(e){let s=this,a=e.id?"/pkm/detail":"/pkm/customZ",y=e.id?{id:e.id}:JSON.parse(this.$route.params.json||"{}");this.$toast.loading({message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0}),this.$http.get(a,y).then(t=>{this.$refs.config.init(),this.$toast.clear();let l=t.result,d=[];l.img&&d.push(l.img),l.skinImg&&(d=d.concat(l.skinImg.split(","))),this.$route.meta.title=l.pokemonName,e.childList&&(l.childList=e.childList),s.pokemon=l,s.objectId=l.objectId,s.raceList=s.splitString(l.race,","),s.characteristicList=s.splitString(l.characteristic,","),d.length===0&&d.push(j),s.imgList=d}, t=>{this.$toast.clear()})},splitString(e, s=" "){return e.split(s).filter(a=>{if(a!=="")return a})},toTxDetail(e){this.$router.push({path:"/character",query:{name:e}}),this.showTx=!1},updateData(e){this.pokemonValue=e.pokemon,this.nlList=e.nlList},setMin(){this.$refs.config.setMin()},setMax(){this.$refs.config.setMax()},clickImg(e){R.previewImage(this.imgList,e)}}},ue={class:"header"},_e=["src","onClick"],pe={class:"header-info"},ge={class:"attrs"},fe={key:1,style:{background:"red"}},ve={key:0,src:O,alt:"",class:"big"},ke={class:"footer"},Ae={style:{display:"flex","flex-direction":"column",color:"#333333",padding:"6px"}},ye=I("\u79CD\u65CF\u503C"),Ce={style:{display:"flex","flex-direction":"column",color:"#333333",padding:"6px"}},we=["onClick"],be=I("\u7279\u6027");function Le(e, s, a, y, t, l){const d=m("nav-bar"),f=m("van-tab"),c=m("van-tabs"),u=m("van-swipe-item"),b=m("van-swipe"),B=m("van-button"),S=m("van-popover"),_=m("z-panel"),V=m("z-config"),N=m("description"),M=m("z-comment"),P=m("float-button");return o(),n(A,null,[h(d,{title:t.pokemon.pokemonName},null,8,["title"]),i("div",null,[h(c,{active:t.active,"onUpdate:active":s[0]||(s[0]= g=>t.active=g)},{default:p(()=>[h(f,{title:"\u8BE6\u60C5",name:"panel"}),h(f,{title:"\u5206\u6790",name:"desc"}),h(f,{title:"\u8BC4\u8BBA",name:"comment"})]),_:1},8,["active"]),v(i("div",ue,[h(b,{autoplay:3e3,"indicator-color":"white"},{default:p(()=>[(o(!0),n(A,null,C(t.imgList, g=>(o(),L(u,{class:"swipe"},{default:p(()=>[i("img",{class:"swipe-img",src:g,alt:"",onClick: T=>l.clickImg(g)},null,8,_e)]),_:2},1024))),256))]),_:1}),i("div",pe,[i("div",ge,[t.pokemon.property!=="?"&&t.pokemon.property.length!==18?(o(!0),n(A,{key:0},C(t.pokemon.property.trim(), g=>(o(),n("div",{style:E({background:t.attrs[g].color})},r(t.attrs[g].label),5))),256)):t.pokemon.property.length===18?(o(),n("div",fe,"\u5168\u5C5E\u6027")):w("",!0),v(i("div",{style:{background:"#feee00"}}," \u7269\u653B"+r(t.nlList[0]>0?"+"+t.nlList[0]:t.nlList[0]),513),[[k,t.nlList[0]!==0]]),v(i("div",{style:{background:"#ff9a00"}}," \u7269\u653B"+r(t.nlList[0]>0?"+"+t.nlList[0]:t.nlList[0]),513),[[k,t.nlList[0]!==0]]),v(i("div",{style:{background:"#00e9ff"}}," \u7269\u9632"+r(t.nlList[1]>0?"+"+t.nlList[1]:t.nlList[1]),513),[[k,t.nlList[1]!==0]]),v(i("div",{style:{background:"#007fff"}}," \u7279\u653B"+r(t.nlList[2]>0?"+"+t.nlList[2]:t.nlList[2]),513),[[k,t.nlList[2]!==0]]),v(i("div",{style:{background:"#feee00"}}," \u7279\u9632"+r(t.nlList[3]>0?"+"+t.nlList[3]:t.nlList[3]),513),[[k,t.nlList[3]!==0]]),v(i("div",{style:{background:"#e300ff"}}," \u901F\u5EA6"+r(t.nlList[4]>0?"+"+t.nlList[4]:t.nlList[4]),513),[[k,t.nlList[4]!==0]])]),t.pokemon.big?(o(),n("img",ve)):w("",!0),i("div",ke,[t.raceList.length===6?(o(),L(S,{key:0,show:t.showRace,"onUpdate:show":s[1]||(s[1]= g=>t.showRace=g),placement:"left"},{reference:p(()=>[h(B,{size:"small"},{default:p(()=>[ye]),_:1})]),default:p(()=>[i("div",Ae,[i("div",null,"\u8840\u91CF\uFF1A"+r(t.raceList[0]),1),i("div",null,"\u7269\u653B\uFF1A"+r(t.raceList[1]),1),i("div",null,"\u7269\u9632\uFF1A"+r(t.raceList[2]),1),i("div",null,"\u7279\u653B\uFF1A"+r(t.raceList[3]),1),i("div",null,"\u7279\u9632\uFF1A"+r(t.raceList[4]),1),i("div",null,"\u901F\u5EA6\uFF1A"+r(t.raceList[5]),1),i("div",null,"\u603B\u548C\uFF1A"+r(l.raceSum),1)])]),_:1},8,["show"])):w("",!0),t.characteristicList.length>0?(o(),L(S,{key:1,show:t.showTx,"onUpdate:show":s[2]||(s[2]= g=>t.showTx=g),placement:"left"},{reference:p(()=>[h(B,{size:"small",style:{"margin-left":"8px"}},{default:p(()=>[be]),_:1})]),default:p(()=>[i("div",Ce,[(o(!0),n(A,null,C(t.characteristicList,(g, T)=>(o(),n("div",{style:{"min-width":"75px",padding:"4px"},onClick: xe=>l.toTxDetail(g),key:T},r(g),9,we))),128))])]),_:1},8,["show"])):w("",!0)])])],512),[[k,t.active!=="comment"]]),v(i("div",null,[h(_,{pokemon:t.pokemonValue},null,8,["pokemon"]),h(V,{ref:"config",pokemon:t.pokemon,onUpdate:l.updateData,onUpdateForm:l.getPokemon},null,8,["pokemon","onUpdate","onUpdateForm"])],512),[[k,t.active==="panel"]]),t.pokemon.id?v((o(),L(N,{key:0,pid:t.pokemon.id,pokemon:t.pokemon},null,8,["pid","pokemon"])),[[k,t.active==="desc"]]):w("",!0),t.pokemon.id?v((o(),L(M,{key:1,pid:t.pokemon.id},null,8,["pid"])),[[k,t.active==="comment"]]):w("",!0),v(h(P,{text:"MAX",align:"right",onClick:l.setMax},null,8,["onClick"]),[[k,t.active==="panel"]]),v(h(P,{text:"MIN",onClick:l.setMin},null,8,["onClick"]),[[k,t.active==="panel"]])])],64)}const Ue=D(he,[["render",Le],["__scopeId","data-v-5e49013d"]]);export{Ue as default};
