import{s as I}from "./selectPage-cdc83afe.js";import"./config-ebaf3ab9.js";import{_ as b,m as _,A as P,r as m,o as g,c as k,a as c,d as s,w as a,F as x,b as V,e as y,B as U,i as D,j as z,v as L,C as A,N as K,s as B,f as E}from "./index-7d1d6393.js";/* empty css                                                              */const T={props:{columns:Array},setup(o, {emit:e}){const n=_([]),i=_([]),l= r=>{i.value[r].toggle()};return P(()=>{i.value=[]}),{toggle:l,checked:n,checkboxRefs:i,cancel:()=>{e("cancel")},confirm:()=>{e("confirm",{value:n.value})}}}},O={class:"header"};function q(o, e, n, i, l, u){const h=m("van-checkbox"),r=m("van-cell"),f=m("van-cell-group"),p=m("van-checkbox-group");return g(),k("div",null,[c("div",O,[c("div",{class:"cancel",onClick:e[0]||(e[0]=(...d)=>i.cancel&&i.cancel(...d))},"\u53D6\u6D88"),c("div",{class:"confirm",onClick:e[1]||(e[1]=(...d)=>i.confirm&&i.confirm(...d))},"\u786E\u8BA4")]),s(p,{modelValue:i.checked,"onUpdate:modelValue":e[3]||(e[3]= d=>i.checked=d),class:"list"},{default:a(()=>[s(f,null,{default:a(()=>[(g(!0),k(x,null,V(n.columns,(d, v)=>(g(),y(r,{clickable:"",key:d,title:d,onClick: w=>i.toggle(v)},{"right-icon":a(()=>[s(h,{name:d,ref_for:!0,ref: w=>i.checkboxRefs[v]=w,onClick:e[2]||(e[2]=U(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])])}const M=b(T,[["render",q],["__scopeId","data-v-2ad4eed3"]]);const X={name:"zSelect",props:{show:Boolean,type:String},data(){return{inputVal:"",list:[],curPage:0,pageSize:30,hasMoreData:!1,loading:!1,isWxEnv:!1}},created(){this.isWxEnv=D.isWxEnv()},watch:{show(o){o&&(this.inputVal="",this.curPage=0,this.list=[],this.onLoadData())}},methods:{onLoadData:function(){this.curPage+=1;let o=this;this.loading=!0;let e={name:this.inputVal,index:this.curPage,pageSize:this.pageSize};const n=this.type;let i="";n.startsWith("skill")?i="/skill/queryList":n==="superSkill"?i="/superSkill/queryList":n==="tx"?i="/cc/queryList":n==="prop"&&(i="/prop/queryList"),this.$toast.loading("\u52A0\u8F7D\u4E2D"),this.$http.get(i,e).then(l=>{this.$toast.clear();let u=l.result,h=u.records,r=u.pages>this.curPage;this.loading=!1;let f=o.list;this.curPage===1?f=h:f=f.concat(h),o.list=f,o.hasMoreData=r})},onConfirm(){this.curPage=0,this.onLoadData()},onClear(){this.inputVal="",this.curPage=0,this.onLoadData()},selectPage(o){this.$emit("update:show",!1),this.$emit("select",o)}}},j={class:"page__bd"};function W(o, e, n, i, l, u){const h=m("van-search"),r=m("van-cell"),f=m("van-list");return z((g(),k("view",{class:A(["page",l.isWxEnv?"":"mt46"])},[s(h,{placeholder:"\u641C\u7D22\u5173\u952E\u5B57",modelValue:l.inputVal,"onUpdate:modelValue":e[0]||(e[0]= p=>l.inputVal=p),onSearch:u.onConfirm,onCancel:u.onClear},null,8,["modelValue","onSearch","onCancel"]),c("view",j,[s(f,{loading:l.loading,"onUpdate:loading":e[1]||(e[1]= p=>l.loading=p),finished:!l.hasMoreData,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:u.onLoadData,offset:500,"immediate-check":!0},{default:a(()=>[(g(!0),k(x,null,V(l.list, p=>(g(),y(r,{title:p.name,key:p.id,"is-link":"",onClick: d=>u.selectPage(p)},null,8,["title","onClick"]))),128))]),_:1},8,["loading","finished","onLoad"])])],2)),[[L,n.show]])}const R=b(X,[["render",W],["__scopeId","data-v-caf32548"]]);const F={name:"teamEdit",components:{NavBar:K,ZSelect:R,MutiPicker:M,selectPage:I},data(){return{teamNames:[],showTeam:!1,showPokemon:!1,showXg:!1,showNlz:!1,showAttr:!1,showSelect:!1,selectKey:"",indexList:{teamNameIndex:0,effort1Index:0,effort2Index:0,characterIndex:0},attrs:"",attribute:["\u666E","\u683C","\u98DE","\u6BD2","\u5730","\u5CA9","\u866B","\u9B3C","\u94A2","\u706B","\u6C34","\u8349","\u7535","\u8D85","\u51B0","\u9F99","\u6076","\u5996"],character:["\u5F00\u6717(\u901F\u5EA6\u2191;\u7279\u653B\u2193)","\u80C6\u5C0F(\u901F\u5EA6\u2191;\u7269\u653B\u2193)","\u56FA\u6267(\u7269\u653B\u2191;\u7279\u653B\u2193)","\u4FDD\u5B88(\u7279\u653B\u2191;\u7269\u653B\u2193)","\u5927\u80C6(\u7269\u9632\u2191;\u7269\u653B\u2193)","\u6DD8\u6C14(\u7269\u9632\u2191;\u7279\u653B\u2193)","\u6C89\u7740(\u7279\u9632\u2191;\u7269\u653B\u2193)","\u614E\u91CD(\u7279\u9632\u2191;\u7279\u653B\u2193)","\u5B64\u72EC(\u7269\u653B\u2191;\u7269\u9632\u2193)","\u8C03\u76AE(\u7269\u653B\u2191;\u7279\u9632\u2193)","\u52C7\u6562(\u7269\u653B\u2191;\u901F\u5EA6\u2193)","\u7A33\u91CD(\u7279\u653B\u2191;\u7269\u9632\u2193)","\u9A6C\u864E(\u7279\u653B\u2191;\u7279\u9632\u2193)","\u51B7\u9759(\u7279\u653B\u2191;\u901F\u5EA6\u2193)","\u6025\u8E81(\u901F\u5EA6\u2191;\u7269\u9632\u2193)","\u5929\u771F(\u901F\u5EA6\u2191;\u7279\u9632\u2193)","\u4E50\u5929(\u7269\u9632\u2191;\u7279\u9632\u2193)","\u60A0\u95F2(\u7269\u9632\u2191;\u901F\u5EA6\u2193)","\u6E29\u987A(\u7279\u9632\u2191;\u7269\u9632\u2193)","\u72C2\u5984(\u7279\u9632\u2191;\u901F\u5EA6\u2193)","\u5E73\u8861"],effort:["\u8840\u91CF","\u7269\u653B","\u7269\u9632","\u7279\u653B","\u7279\u9632","\u901F\u5EA6"],name:"",effortValue:"",xg:"",tx:"",pid:-1,pname:"",skill1:"",skill2:"",skill3:"",skill4:"",superSkill:"",prop:"",teamId:null,userInfo:{}}},created(){let o=B.getItem("userInfo");if(!o.id){this.$router.replace("/login");return}let e=JSON.parse(localStorage.getItem("teamNames")||"[]");if(e.length===0)for(let n=1; n<=10; n++)e.push("\u961F\u4F0D"+n);if(this.setData({teamNames:e,userInfo:o,name:e[0]}),this.$route.query.obj){let n=JSON.parse(decodeURIComponent(this.$route.query.obj));this.setData({teamId:n.id,name:e[n.groupNum],effortValue:n.efforts,xg:n.xg,tx:n.tx,pid:n.pid,pname:n.pname,skill1:n.skill1,skill2:n.skill2,skill3:n.skill3,skill4:n.skill4,superSkill:n.superSkill,prop:n.prop,attrs:n.attrs})}},methods:{setData(o){Object.getOwnPropertyNames(o).forEach(e=>{this[e]=o[e]})},change(o, e){this[o]=Array.isArray(e)?e.join(","):e,this.showXg=!1,this.showTeam=!1,this.showAttr=!1,this.showNlz=!1},changePokemon(o){o.property.length===18&&(o.property="\u666E"),this.setData({pid:o.id,pname:o.pokemonName,attrs:o.property.split("").join(",")})},changeSelect(o){this[this.selectKey]=o.name,this.showSelect=!1},onSubmit(o){if(this.teamNames.indexOf(o.name)===-1){this.$toast("\u8BF7\u9009\u62E9\u961F\u4F0D\u540D\u79F0");return}if(!this.pid){this.$toast("\u8BF7\u9009\u62E9\u7CBE\u7075");return}this.$toast.loading("\u4FDD\u5B58\u4E2D");let e={wxOpenId:this.userInfo.id,groupNum:this.teamNames.indexOf(o.name),skill1:o.skill1,skill2:o.skill2,skill3:o.skill3,skill4:o.skill4,superSkill:o.superSkill,prop:o.prop,efforts:o.effortValue,xg:o.xg,pid:this.pid,tx:o.tx,pname:o.pname,attrs:o.attrs};console.log(e),this.teamId&&(e.id=this.teamId);let n=this.teamId?"/team/updateById":"/team/insert";this.$http.post(n,e).then(i=>{this.$toast.clear(),i.code===200?(this.$toast("\u4FDD\u5B58\u6210\u529F"),setTimeout(()=>{window.history.back()},800)):this.$toast(i.msg)}, i=>{this.$toast.clear(),this.$toast(i)})}}},J={style:{margin:"16px"}},Z=E(" \u63D0\u4EA4 ");function G(o, e, n, i, l, u){const h=m("nav-bar"),r=m("van-field"),f=m("van-picker"),p=m("van-popup"),d=m("muti-picker"),v=m("van-cell-group"),w=m("van-button"),S=m("van-form"),C=m("select-page"),N=m("z-select");return g(),k("div",null,[s(h,{title:"\u961F\u4F0D\u7F16\u8F91"}),s(S,{onSubmit:u.onSubmit,style:{"margin-top":"16px"}},{default:a(()=>[s(v,{inset:""},{default:a(()=>[s(r,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]= t=>l.name=t),"is-link":"",readonly:"",name:"name",label:"\u961F\u4F0D\u5206\u7EC4",placeholder:"\u8BF7\u9009\u62E9","input-align":"right",onClick:e[1]||(e[1]= t=>l.showTeam=!0)},null,8,["modelValue"]),s(p,{show:l.showTeam,"onUpdate:show":e[4]||(e[4]= t=>l.showTeam=t),position:"bottom"},{default:a(()=>[s(f,{columns:l.teamNames,onConfirm:e[2]||(e[2]= t=>u.change("name",t)),onCancel:e[3]||(e[3]= t=>l.showTeam=!1)},null,8,["columns"])]),_:1},8,["show"]),s(r,{modelValue:l.pname,"onUpdate:modelValue":e[6]||(e[6]= t=>l.pname=t),name:"pname",label:"\u7CBE\u7075\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[5]||(e[5]= t=>l.showPokemon=!0)},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{"model-value":l.attrs,"is-link":"",readonly:"",label:"\u5C5E\u6027",name:"attrs",onClick:e[7]||(e[7]= t=>l.showAttr=!0),placeholder:"\u8BF7\u9009\u62E9","input-align":"right"},null,8,["model-value"]),s(p,{show:l.showAttr,"onUpdate:show":e[10]||(e[10]= t=>l.showAttr=t),position:"bottom"},{default:a(()=>[s(d,{columns:l.attribute,onConfirm:e[8]||(e[8]= t=>u.change("attrs",t.value)),onCancel:e[9]||(e[9]= t=>l.showAttr=!1)},null,8,["columns"])]),_:1},8,["show"]),s(r,{"model-value":l.effortValue,"is-link":"",readonly:"",label:"\u52AA\u529B\u503C",name:"effortValue",onClick:e[11]||(e[11]= t=>l.showNlz=!0),placeholder:"\u8BF7\u9009\u62E9","input-align":"right"},null,8,["model-value"]),s(p,{show:l.showNlz,"onUpdate:show":e[14]||(e[14]= t=>l.showNlz=t),position:"bottom"},{default:a(()=>[s(d,{columns:l.effort,onConfirm:e[12]||(e[12]= t=>u.change("effortValue",t.value)),onCancel:e[13]||(e[13]= t=>l.showNlz=!1)},null,8,["columns"])]),_:1},8,["show"]),s(r,{label:"\u6027\u683C","model-value":l.xg,"is-link":"",readonly:"",name:"xg",onClick:e[15]||(e[15]= t=>l.showXg=!0),placeholder:"\u8BF7\u9009\u62E9","input-align":"right"},null,8,["model-value"]),s(p,{show:l.showXg,"onUpdate:show":e[18]||(e[18]= t=>l.showXg=t),position:"bottom"},{default:a(()=>[s(f,{columns:l.character,onConfirm:e[16]||(e[16]= t=>u.change("xg",t)),onCancel:e[17]||(e[17]= t=>l.showXg=!1)},null,8,["columns"])]),_:1},8,["show"]),s(r,{modelValue:l.prop,"onUpdate:modelValue":e[20]||(e[20]= t=>l.prop=t),name:"prop",label:"\u9053\u5177",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[19]||(e[19]= t=>(l.showSelect=!0,l.selectKey="prop"))},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{modelValue:l.tx,"onUpdate:modelValue":e[22]||(e[22]= t=>l.tx=t),name:"tx",label:"\u7279\u6027",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[21]||(e[21]= t=>(l.showSelect=!0,l.selectKey="tx"))},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{modelValue:l.skill1,"onUpdate:modelValue":e[24]||(e[24]= t=>l.skill1=t),name:"skill1",label:"\u6280\u80FD1",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[23]||(e[23]= t=>(l.showSelect=!0,l.selectKey="skill1"))},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{modelValue:l.skill2,"onUpdate:modelValue":e[26]||(e[26]= t=>l.skill2=t),name:"skill2",label:"\u6280\u80FD2",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[25]||(e[25]= t=>(l.showSelect=!0,l.selectKey="skill2"))},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{modelValue:l.skill3,"onUpdate:modelValue":e[28]||(e[28]= t=>l.skill3=t),name:"skill3",label:"\u6280\u80FD3",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[27]||(e[27]= t=>(l.showSelect=!0,l.selectKey="skill3"))},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{modelValue:l.skill4,"onUpdate:modelValue":e[30]||(e[30]= t=>l.skill4=t),name:"skill4",label:"\u6280\u80FD4",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[29]||(e[29]= t=>(l.showSelect=!0,l.selectKey="skill4"))},"\u9009\u62E9")]),_:1},8,["modelValue"]),s(r,{modelValue:l.superSkill,"onUpdate:modelValue":e[32]||(e[32]= t=>l.superSkill=t),name:"superSkill",label:"\u8D85\u7EA7\u62DB\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u6216\u9009\u62E9","input-align":"right"},{button:a(()=>[c("div",{class:"btn",onClick:e[31]||(e[31]= t=>(l.showSelect=!0,l.selectKey="superSkill"))},"\u9009\u62E9")]),_:1},8,["modelValue"])]),_:1}),c("div",J,[s(w,{round:"",block:"",type:"primary","native-type":"submit"},{default:a(()=>[Z]),_:1})])]),_:1},8,["onSubmit"]),s(C,{show:l.showPokemon,"onUpdate:show":e[33]||(e[33]= t=>l.showPokemon=t),onSelect:u.changePokemon},null,8,["show","onSelect"]),s(N,{show:l.showSelect,"onUpdate:show":e[34]||(e[34]= t=>l.showSelect=t),type:this.selectKey,onSelect:u.changeSelect},null,8,["show","type","onSelect"])])}const ee=b(F,[["render",G],["__scopeId","data-v-0143a2df"]]);export{ee as default};
