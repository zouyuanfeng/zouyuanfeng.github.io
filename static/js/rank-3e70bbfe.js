import{_ as L,N as w,i as D,r as o,o as d,c as v,d as l,w as p,a as g,e as m,g as _,F as N,b as P,f as B,l as E,k as M}from "./index-7d1d6393.js";const S={name:"rank",components:{NavBar:w},data(){return{inputVal:"",list:[],array0:[{text:"\u5168\u90E8",value:""},{text:"\u4E00\u822C",value:"\u666E"},{text:"\u683C\u6597",value:"\u683C"},{text:"\u98DE\u884C",value:"\u98DE"},{text:"\u6BD2",value:"\u6BD2"},{text:"\u5730\u9762",value:"\u5730"},{text:"\u5CA9\u77F3",value:"\u5CA9"},{text:"\u866B",value:"\u866B"},{text:"\u5E7D\u7075",value:"\u9B3C"},{text:"\u94A2",value:"\u94A2"},{text:"\u706B",value:"\u706B"},{text:"\u6C34",value:"\u6C34"},{text:"\u8349",value:"\u8349"},{text:"\u7535",value:"\u7535"},{text:"\u8D85\u80FD\u529B",value:"\u8D85"},{text:"\u51B0",value:"\u51B0"},{text:"\u9F99",value:"\u9F99"},{text:"\u6076",value:"\u6076"},{text:"\u5996\u7CBE",value:"\u5996"}],array1:[{text:"\u5168\u90E8",value:""},{text:"5.5\u6298",value:"5.5"},{text:"6.5\u6298",value:"6.5"},{text:"8\u6298",value:"8"},{text:"9\u6298",value:"9"},{text:"9.8\u6298",value:"9.8"},{text:"10\u6298",value:"10"}],array2:[{text:"\u5168\u90E8",value:""},{text:"\u662F",value:1},{text:"\u5426",value:0}],index:{index0:"",index1:"",index2:""},value:{value0:"\u5168\u90E8",value1:"\u5168\u90E8",value2:"\u5168\u90E8"},curPage:0,pageSize:30,hasMoreData:!1,loading:!1,rank:"hp",rankList:["hp","pa","pd","sa","sd","speed"],range:{min:"0",max:"50000"},title:"",isWxEnv:!1}},beforeRouteEnter(i, e, u){i.meta.isBack=e.name==="detail",u()},activated(){this.$route.meta.isBack||(document.documentElement.scrollTop=document.body.scrollTop=0,this.rank=this.$route.query.filed||"hp",this.onClear())},watch:{rank(i){let e="";switch(i){case"hp":e="\u8840\u91CF\u6392\u884C\u699C";break;case"pa":e="\u7269\u653B\u6392\u884C\u699C";break;case"pd":e="\u7269\u9632\u6392\u884C\u699C";break;case"sa":e="\u7279\u653B\u6392\u884C\u699C";break;case"sd":e="\u7279\u9632\u6392\u884C\u699C";break;case"speed":e="\u6781\u9650\u901F\u5EA6\u6392\u884C\u699C";break}this.title=e}},created(){this.isWxEnv=D.isWxEnv(),this.rank=this.$route.query.filed||"hp",this.onLoadData()},methods:{changeMenu(i, e){var u;this.value["value"+e]=((u=this["array"+e].find(h=>h.value===i))==null?void 0:u.text)||"\u5168\u90E8",this.curPage=0,this.onLoadData()},changeRange(){this.$refs.item.toggle(),this.curPage=0,this.onLoadData()},onLoadData:function(){this.curPage+=1;let i=this;this.loading=!0;let e={name:this.inputVal,index:this.curPage,pageSize:this.pageSize,rank:this.rank};this.index.index0&&(e.property=this.index.index0),this.index.index1&&(e.discount=this.index.index1),this.index.index2&&(e.isBig=this.index.index2),this.rank==="speed"&&(e.min=this.range.min||-1,e.max=this.range.max||-1),(this.rank==="speed"?this.$http.get("/rank/queryList",e):this.$http.get("/pkm/queryList",e)).then(h=>{let a=h.result,s=a.records,x=a.pages>this.curPage;this.loading=!1;let r=i.list;this.curPage===1?r=s:r=r.concat(s);let c=this.rankList.indexOf(this.rank);r.forEach(n=>{n.img&&(n.img=n.img.replace("large","thumbnail")),n.rank=n[this.rank],n.st2&&(n.rank+=parseInt(n.st2.split(",")[c])),n.red1&&(n.rank+=parseInt(n.red1.split(",")[c]))}),i.list=JSON.parse(JSON.stringify(r)),i.hasMoreData=x}, h=>{})},onConfirm(){this.curPage=0,this.onLoadData()},onClear(){this.inputVal="",this.curPage=0,this.index={index0:"",index1:"",index2:""},this.value={value0:"\u5168\u90E8",value1:"\u5168\u90E8",value2:"\u5168\u90E8"},this.onLoadData()}}},q={class:"page"},U={style:{padding:"5px 16px",background:"white"}},W=B(" \u786E\u8BA4 "),z={class:"page__bd"},I={class:"thumb"},O=["src"],R={key:1,class:"icon",src:E},T={key:2,class:"big",src:M};function F(i, e, u, h, a, s){const x=o("nav-bar"),r=o("van-search"),c=o("van-dropdown-item"),n=o("van-field"),f=o("van-button"),k=o("van-dropdown-menu"),y=o("van-sticky"),b=o("van-cell"),V=o("van-list");return d(),v("view",q,[l(x,{title:a.title},null,8,["title"]),l(y,{"offset-top":a.isWxEnv?0:46},{default:p(()=>[l(r,{placeholder:"\u5982\uFF1A\u76AE\u5361\u4E18",modelValue:a.inputVal,"onUpdate:modelValue":e[0]||(e[0]= t=>a.inputVal=t),onSearch:s.onConfirm,onCancel:s.onClear},null,8,["modelValue","onSearch","onCancel"]),l(k,{"active-color":"#1989fa"},{default:p(()=>[l(c,{modelValue:a.index.index0,"onUpdate:modelValue":e[1]||(e[1]= t=>a.index.index0=t),options:a.array0,title:"\u5C5E\u6027\uFF1A"+a.value.value0,onChange:e[2]||(e[2]= t=>s.changeMenu(t,0))},null,8,["modelValue","options","title"]),l(c,{modelValue:a.index.index1,"onUpdate:modelValue":e[3]||(e[3]= t=>a.index.index1=t),options:a.array1,title:"\u6298\u6263\uFF1A"+a.value.value1,onChange:e[4]||(e[4]= t=>s.changeMenu(t,1))},null,8,["modelValue","options","title"]),a.rank==="speed"?(d(),m(c,{key:0,title:"\u7B5B\u9009",ref:"item"},{default:p(()=>[l(n,{modelValue:a.range.min,"onUpdate:modelValue":e[5]||(e[5]= t=>a.range.min=t),type:"digit",label:"\u6700\u5C0F\u503C","input-align":"right"},null,8,["modelValue"]),l(n,{modelValue:a.range.max,"onUpdate:modelValue":e[6]||(e[6]= t=>a.range.max=t),type:"digit",label:"\u6700\u5927\u503C","input-align":"right"},null,8,["modelValue"]),g("div",U,[l(f,{type:"danger",block:"",round:"",onClick:s.changeRange},{default:p(()=>[W]),_:1},8,["onClick"])])]),_:1},512)):_("",!0)]),_:1})]),_:1},8,["offset-top"]),g("view",z,[l(V,{loading:a.loading,"onUpdate:loading":e[7]||(e[7]= t=>a.loading=t),finished:!a.hasMoreData,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:s.onLoadData,offset:500,"immediate-check":!0},{default:p(()=>[(d(!0),v(N,null,P(a.list,(t, C)=>(d(),m(b,{title:t.pokemonName+"("+(t.property.length===18?"\u5168\u5C5E\u6027":t.property)+")",value:t.rank,key:t.id+C,"is-link":"",to:"/detail?id="+t.id},{icon:p(()=>[g("div",I,[t.img?(d(),v("img",{key:0,class:"icon",src:t.img},null,8,O)):(d(),v("img",R)),t.big?(d(),v("img",T)):_("",!0)])]),_:2},1032,["title","value","to"]))),128))]),_:1},8,["loading","finished","onLoad"])])])}const j=L(S,[["render",F],["__scopeId","data-v-aa68bcbd"]]);export{j as default};
